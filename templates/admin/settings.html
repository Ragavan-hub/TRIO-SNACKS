{% extends "base.html" %}

{% block title %}Settings - Trio Snacks{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1>Settings</h1>
        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
    </div>

    <div class="settings-card">
        <h2>Shop Information</h2>
        <form method="POST" action="{{ url_for('admin_settings_update') }}" enctype="multipart/form-data">
            <div class="form-group">
                <label for="shop-logo">Shop Logo</label>
                <input type="file" id="shop-logo" name="logo" accept="image/*">
                <small>Upload your shop logo (JPG, PNG, GIF - Max 5MB)</small>
                {% if settings.get('shop_logo') %}
                    <div style="margin-top: 10px;">
                        <p><strong>Current Logo:</strong></p>
                        <img src="{{ url_for('static', filename='images/' + settings.get('shop_logo')) }}" alt="Shop Logo" style="max-width: 200px; max-height: 100px; border: 2px solid #000; border-radius: 4px; padding: 5px; background: #FFD700;">
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="shop-name">Shop Name</label>
                <input type="text" id="shop-name" name="shop_name" value="{{ settings.get('shop_name', 'Trio Snacks') }}" required>
            </div>
            <div class="form-group">
                <label for="shop-address">Shop Address</label>
                <input type="text" id="shop-address" name="shop_address" value="{{ settings.get('shop_address', '') }}">
            </div>
            <div class="form-group">
                <label for="shop-phone">Shop Phone</label>
                <input type="text" id="shop-phone" name="shop_phone" value="{{ settings.get('shop_phone', '') }}">
            </div>

            <h2>Billing Settings</h2>
            <div class="form-group">
                <label for="tax-rate">Tax Rate (%)</label>
                <input type="number" id="tax-rate" name="tax_rate" step="0.1" min="0" value="{{ settings.get('tax_rate', '5.0') }}" required>
            </div>
            <div class="form-group">
                <label for="gst-rate">GST Rate (%)</label>
                <input type="number" id="gst-rate" name="gst_rate" step="0.1" min="0" value="{{ settings.get('gst_rate', '0.0') }}" required>
            </div>
            <div class="form-group">
                <label for="stock-alert-threshold">Stock Alert Threshold</label>
                <input type="number" id="stock-alert-threshold" name="stock_alert_threshold" min="0" value="{{ settings.get('stock_alert_threshold', '10') }}" required>
                <small>Products with stock below this number will be marked as low stock</small>
            </div>
            <div class="form-group">
                <label for="invoice-footer">Invoice Footer Text</label>
                <textarea id="invoice-footer" name="invoice_footer" rows="2">{{ settings.get('invoice_footer', 'Thank you for your business!') }}</textarea>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Save Settings</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

